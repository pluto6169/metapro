<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>معرض الميتاداتا - الهوية المصرية</title>
    <link rel="stylesheet" href="styles.css">
    <!-- خط عربي معبر عن الهوية المصرية -->
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&family=Amiri:wght@400;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" type="image/x-icon" href="https://img.icons8.com/color/96/egypt.png">
</head>

<body class="light-mode">
    <!-- شريط التحكم العلوي -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <h1><i class="fas fa-hieroglyph"></i> معرض الميتاداتا المصري</h1>
                    <p class="tagline">عرض وتحليل مصادر التراث المصري بثلاث صيغ عالمية</p>
                </div>
                <div class="controls">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="globalSearch" placeholder="ابحث في العناوين أو المؤلفين...">
                    </div>
                    <button id="themeToggle" class="btn">
                        <i class="fas fa-moon"></i> <span>الوضع الليلي</span>
                    </button>
                    <button id="showAddFormBtn" class="btn btn-primary">
                        <i class="fas fa-plus-circle"></i> <span>مصدر جديد</span>
                    </button>
                </div>
            </div>

            <!-- إحصائيات سريعة -->
            <div class="stats-bar">
                <div class="stat">
                    <i class="fas fa-book-open"></i>
                    <span>المصادر: <strong id="totalItems">0</strong></span>
                </div>
                <div class="stat">
                    <i class="fas fa-filter"></i>
                    <span>النوع:
                        <select id="typeFilter" class="inline-select">
                            <option value="all">الكل</option>
                            <option value="كتاب">كتب</option>
                            <option value="مقال">مقالات</option>
                            <option value="أغنية">أغاني</option>
                            <option value="فيلم">أفلام</option>
                            <option value="وثيقة">وثائق</option>
                            <option value="لوحة">لوحات</option>
                        </select>
                    </span>
                </div>
            </div>
        </div>
    </header>

    <!-- القسم الرئيسي: ثلاث حالات للعرض -->
    <main class="container">
        <!-- الحالة 1: عرض جميع المصادر (القائمة الرئيسية) -->
        <section id="listSection" class="main-section active-section">
            <h2><i class="fas fa-th-list"></i> المصادر المتاحة</h2>

            <div class="stats-cards">
                <div class="stat-card">
                    <h3>توزيع المصادر</h3>
                    <div id="typeChart" class="simple-chart">
                        <!-- سيتم ملؤها ديناميكياً بالرسوم -->
                        <p class="placeholder-chart">سيظهر هنا رسم بياني لتوزيع الأنواع</p>
                    </div>
                </div>
                <div class="stat-card">
                    <h3>آخر الإضافات</h3>
                    <ul id="recentItems" class="recent-list">
                        <!-- آخر 3 مصادر مضافة -->
                    </ul>
                </div>
            </div>

            <div id="itemsContainer" class="items-container">
                <!-- جميع المصادر تظهر هنا -->
                <div class="empty-state">
                    <i class="fas fa-inbox"></i>
                    <h3>لا توجد مصادر حتى الآن</h3>
                    <p>ابدأ بإضافة أول مصدر في مجموعتك</p>
                    <button id="emptyAddBtn" class="btn btn-primary">
                        <i class="fas fa-plus"></i> أضف مصدراً جديداً
                    </button>
                </div>
            </div>
        </section>

        <!-- الحالة 2: نموذج إدخال البيانات -->
        <section id="formSection" class="main-section" style="display:none;">
            <div class="form-header">
                <h2><i class="fas fa-edit"></i> <span id="formTitle">إضافة مصدر جديد</span></h2>
                <button id="backToListBtn" class="btn btn-secondary">
                    <i class="fas fa-arrow-right"></i> العودة للقائمة
                </button>
            </div>

            <div class="form-preview-container">
                <div class="form-column">
                    <form id="metadataForm">
                        <input type="hidden" id="itemId">

                        <div class="form-group">
                            <label for="itemType"><i class="fas fa-tag"></i> نوع المصدر *</label>
                            <select id="itemType" required class="enhanced-select">
                                <option value="">اختر نوع المصدر...</option>
                                <option value="كتاب">كتاب</option>
                                <option value="مقال أكاديمي">مقال أكاديمي</option>
                                <option value="أغنية">أغنية</option>
                                <option value="فيلم">فيلم</option>
                                <option value="وثيقة تاريخية">وثيقة تاريخية</option>
                                <option value="لوحة فنية">لوحة فنية</option>
                                <option value="مخطوطة">مخطوطة</option>
                                <option value="تسجيل صوتي">تسجيل صوتي</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="itemTitle"><i class="fas fa-heading"></i> العنوان الرئيسي *</label>
                            <input type="text" id="itemTitle" placeholder="مثال: الأيام لطه حسين" required>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="itemCreator"><i class="fas fa-user-pen"></i> المؤلف / الفنان</label>
                                <input type="text" id="itemCreator" placeholder="اسم المؤلف، الفنان، أو المخرج">
                            </div>
                            <div class="form-group">
                                <label for="itemYear"><i class="fas fa-calendar"></i> سنة الإصدار</label>
                                <input type="text" id="itemYear" placeholder="مثال: 1929، ١٩٦١">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="itemLanguage"><i class="fas fa-language"></i> اللغة</label>
                            <select id="itemLanguage" class="enhanced-select">
                                <option value="ar">العربية</option>
                                <option value="ar-EG">العربية (مصر)</option>
                                <option value="en">الإنجليزية</option>
                                <option value="fr">الفرنسية</option>
                                <option value="other">أخرى</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="itemDescription"><i class="fas fa-align-left"></i> الوصف</label>
                            <textarea id="itemDescription" rows="3" placeholder="وصف مختصر للمحتوى..."></textarea>
                        </div>

                        <div class="form-group">
                            <label for="itemKeywords"><i class="fas fa-key"></i> الكلمات المفتاحية</label>
                            <input type="text" id="itemKeywords" placeholder="مفصولة بفواصل: أدب، سيرة ذاتية، مصر">
                        </div>

                        <div class="form-buttons">
                            <button type="button" id="previewBtn" class="btn btn-preview">
                                <i class="fas fa-eye"></i> معاينة الأكواد
                            </button>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save"></i> حفظ مباشرة
                            </button>
                        </div>
                    </form>
                </div>

                <div class="preview-column">
                    <div class="preview-placeholder">
                        <i class="fas fa-code"></i>
                        <h3>معاينة الأكواد</h3>
                        <p>املأ النموذج ثم انقر على "معاينة الأكواد" لرؤية الميتاداتا المُولَّدة</p>
                        <div class="preview-tips">
                            <h4><i class="fas fa-lightbulb"></i> نصائح سريعة:</h4>
                            <ul>
                                <li>العنوان والمؤلف مهمان لكل الصيغ</li>
                                <li>Dublin Core مناسبة للموارد البسيطة</li>
                                <li>MODS أكثر تفصيلاً للموارد المعقدة</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- الحالة 3: معاينة الأكواد قبل الحفظ -->
        <section id="previewSection" class="main-section" style="display:none;">
            <div class="preview-header">
                <h2><i class="fas fa-file-code"></i> معاينة ميتاداتا المصدر</h2>
                <div class="preview-actions">
                    <button id="backToFormBtn" class="btn">
                        <i class="fas fa-edit"></i> العودة للتعديل
                    </button>
                    <button id="saveFromPreviewBtn" class="btn btn-primary">
                        <i class="fas fa-check-circle"></i> حفظ ونشر
                    </button>
                </div>
            </div>

            <div class="source-info-card">
                <h3 id="previewSourceTitle">عنوان المصدر</h3>
                <div class="source-meta">
                    <span class="meta-tag" id="previewSourceType">كتاب</span>
                    <span><i class="fas fa-user"></i> <span id="previewSourceCreator">مؤلف</span></span>
                    <span><i class="fas fa-calendar"></i> <span id="previewSourceYear">سنة</span></span>
                </div>
            </div>

            <!-- أزرار التبديل بين الصيغ -->
            <div class="format-tabs">
                <button class="tab-btn active" data-format="simple">
                    <i class="fas fa-code"></i> الصيغة العادية
                </button>
                <button class="tab-btn" data-format="dublin">
                    <i class="fas fa-code"></i> Dublin Core
                </button>
                <button class="tab-btn" data-format="mods">
                    <i class="fas fa-file-code"></i> MODS
                </button>
                <div class="tab-actions">
                    <button id="copyCodeBtn" class="btn btn-small">
                        <i class="fas fa-copy"></i> نسخ الكود
                    </button>
                    <button id="downloadCodeBtn" class="btn btn-small">
                        <i class="fas fa-download"></i> تحميل
                    </button>
                </div>
            </div>

            <!-- عرض الأكواد -->
            <div class="code-preview-container">
                <div class="code-display active" id="simplePreview">
                    <div class="code-header">صيغة نصية مبسطة</div>
                    <pre><code id="simpleCode">// سيظهر هنا الكود المبسط</code></pre>
                </div>
                <div class="code-display" id="dublinPreview">
                    <div class="code-header">Dublin Core (XML)</div>
                    <pre><code id="dublinCode">// سيظهر هنا كود Dublin Core</code></pre>
                </div>
                <div class="code-display" id="modsPreview">
                    <div class="code-header">MODS (XML)</div>
                    <pre><code id="modsCode">// سيظهر هنا كود MODS</code></pre>
                </div>
            </div>

            <div class="preview-footer">
                <p><i class="fas fa-info-circle"></i> هذه معاينة فقط. لن يتم حفظ المصدر حتى تنقر على "حفظ ونشر".</p>
            </div>
        </section>
    </main>

    <!-- تذييل الصفحة -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <h3><i class="fas fa-hieroglyph"></i> معرض الميتاداتا</h3>
                    <p>مشروع تعليمي يهدف إلى توثيق التراث المصري عبر معايير الميتاداتا العالمية</p>
                </div>
                <div class="footer-links">
                    <h4>الصيغ المدعومة</h4>
                    <ul>
                        <li>Dublin Core</li>
                        <li>MODS</li>
                        <li>الصيغة المبسطة</li>
                    </ul>
                </div>
                <div class="footer-export">
                    <h4>تصدير البيانات</h4>
                    <button id="exportAllBtn" class="btn btn-small">
                        <i class="fas fa-database"></i> تصدير الكل كـ JSON
                    </button>
                    <button id="printAllBtn" class="btn btn-small">
                        <i class="fas fa-print"></i> طباعة القائمة
                    </button>
                </div>
            </div>
            <div class="footer-bottom">
                <p>جميع البيانات محفوظة محلياً على جهازك | مشروع تعليمي © 2025</p>
                <p class="egypt-heritage">تراث مصر يخلد بالأرقام</p>
            </div>
        </div>
    </footer>

    <!-- إشعارات صغيرة -->
    <div id="notification" class="notification">
        <span id="notificationText">تمت العملية بنجاح</span>
    </div>

    <!-- نافذة تأكيد الحذف -->
    <div id="confirmModal" class="modal" style="display:none;">
        <div class="modal-content">
            <h3><i class="fas fa-exclamation-triangle"></i> تأكيد الحذف</h3>
            <p>هل أنت متأكد من حذف هذا المصدر؟ لا يمكن التراجع عن هذه الخطوة.</p>
            <div class="modal-buttons">
                <button id="cancelDeleteBtn" class="btn">إلغاء</button>
                <button id="confirmDeleteBtn" class="btn btn-danger">نعم، احذف</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>